import{d as j,c as F,o as i,b as r,g as s,e as a,w as o,a as d,bO as L,v as n,F as y,q as w,t as u,L as c,bV as V,x as G,y as M,aP as R,D as q}from"./index-9ac666b4.js";import{N as E,a as I}from"./Grid-2e128fee.js";import{N as z}from"./Progress-d9ba84cb.js";import"./get-slot-1efb97e5.js";const O={class:"iot-page"},U={class:"page-header"},W={class:"header-actions"},Z={class:"stat-card__header"},H={class:"stat-label"},J={class:"stat-card__value"},K={class:"value"},Q={key:0,class:"unit"},Y={class:"stat-tip"},ss={class:"content-grid"},ts={class:"panel"},es={class:"chart-wrapper"},as={class:"line-chart",viewBox:"0 0 100 60",preserveAspectRatio:"none"},ds=["d"],ls=["d"],os=["d"],ns=["d"],is={class:"chart-footer"},rs={class:"footer-item"},us={class:"footer-value"},cs={class:"footer-item"},ps={class:"footer-value"},vs={class:"panel"},bs={class:"donut-wrapper"},hs={viewBox:"0 0 120 120",class:"donut-chart"},_s=["stroke","stroke-dasharray","stroke-dashoffset"],fs={x:"60",y:"74","text-anchor":"middle",class:"donut-value"},gs={class:"donut-legend"},ms={class:"legend-text"},xs={class:"legend-number"},ys={class:"panel"},ws={class:"chart-wrapper"},ks={class:"line-chart",viewBox:"0 0 100 60",preserveAspectRatio:"none"},Ns=["d"],$s=["d"],Fs=["d"],Vs=["d"],zs={class:"chart-footer"},Bs={class:"footer-item"},Cs={class:"footer-value"},Ds={class:"footer-item"},Ls={class:"footer-value"},Ms={class:"panel wordcloud-panel"},Ss={class:"wordcloud"},As={class:"bottom-cards"},Ps={class:"bottom-card__header"},Ts={class:"health-list"},Xs={class:"health-item"},js={class:"health-item"},Gs={class:"health-item"},Rs={class:"bottom-card__header"},qs=j({__name:"iotDashboard",setup(Es){const S=[{label:"在线设备",value:"12,010",unit:"台",trend:3.2,tip:"近24小时环比"},{label:"新增设备",value:"368",unit:"台",trend:1.8,tip:"今日新增"},{label:"数据上报",value:"8,874",unit:"万条",trend:4.6,tip:"近24小时"},{label:"告警率",value:"2.8",unit:"%",trend:-.7,tip:"近7日平均"}],v=[{date:"03-09",inbound:12,outbound:9},{date:"03-10",inbound:18,outbound:14},{date:"03-11",inbound:33,outbound:26},{date:"03-12",inbound:49,outbound:38},{date:"03-13",inbound:22,outbound:18},{date:"03-14",inbound:27,outbound:20},{date:"03-15",inbound:31,outbound:24}],b=[{date:"03-09",inbound:18,outbound:13},{date:"03-10",inbound:24,outbound:16},{date:"03-11",inbound:40,outbound:31},{date:"03-12",inbound:55,outbound:42},{date:"03-13",inbound:28,outbound:22},{date:"03-14",inbound:33,outbound:24},{date:"03-15",inbound:38,outbound:27}],g=[{label:"早班",value:432,color:"#2468F2"},{label:"中班",value:78,color:"#3CBC8F"},{label:"夜班",value:3400,color:"#4B5563"}],A=[{label:"设备巡检",weight:22},{label:"能耗优化",weight:19},{label:"阈值调优",weight:14},{label:"摄像头故障",weight:12},{label:"异常离线",weight:11},{label:"数据丢包",weight:10},{label:"固件升级",weight:9},{label:"边缘节点",weight:8},{label:"网关重启",weight:7},{label:"信号弱",weight:6}],P=l=>`${l>0?"+":""}${l.toFixed(1)}%`,p={width:100,height:60},B=l=>Math.max(...l.flatMap(e=>[e.inbound,e.outbound]),1),m=(l,t)=>{const e=B(l),h=p.width/Math.max(l.length-1,1);return l.map((f,_)=>{const N=_*h,$=p.height-f[t]/e*p.height;return`${_===0?"M":"L"} ${N.toFixed(2)} ${$.toFixed(2)}`}).join(" ")},x=(l,t)=>{const e=B(l),h=p.width/Math.max(l.length-1,1),f=l.map((N,$)=>{const T=$*h,X=p.height-N[t]/e*p.height;return`${T.toFixed(2)},${X.toFixed(2)}`}),_=(l.length-1)*h;return`M 0 ${p.height} L ${f.join(" L ")} L ${_.toFixed(2)} ${p.height} Z`},C=F(()=>v[v.length-1]),D=F(()=>b[b.length-1]),k=F(()=>g.reduce((l,t)=>l+t.value,0));return(l,t)=>(i(),r("div",O,[s("div",U,[t[2]||(t[2]=s("div",null,[s("p",{class:"subtitle"},"智慧物联 · 场景驾驶舱"),s("h2",{class:"title"},"设备态势与运维总览")],-1)),s("div",W,[a(d(c),{type:"success",size:"large",round:"",bordered:!1},{default:o(()=>t[0]||(t[0]=[u(" 运行正常 ")])),_:1}),a(d(c),{type:"info",round:"",bordered:!1},{default:o(()=>t[1]||(t[1]=[u(" 实时刷新 · 30s ")])),_:1})])]),a(d(I),{cols:4,"x-gap":16,"y-gap":16,class:"mt-4 stats-grid","item-responsive":"",responsive:"screen",screens:{xs:{cols:1},s:{cols:2},m:{cols:2},l:{cols:3},xl:{cols:4},xxl:{cols:4}}},{default:o(()=>[(i(),r(y,null,w(S,e=>a(d(E),{key:e.label},{default:o(()=>[a(d(V),{class:"stat-card",bordered:!1},{default:o(()=>[s("div",Z,[s("span",H,n(e.label),1),a(d(c),{type:e.trend>=0?"success":"error",size:"small",round:""},{default:o(()=>[u(n(P(e.trend)),1)]),_:2},1032,["type"])]),s("div",J,[s("span",K,n(e.value),1),e.unit?(i(),r("span",Q,n(e.unit),1)):G("",!0)]),s("p",Y,n(e.tip),1)]),_:2},1024)]),_:2},1024)),64))]),_:1}),s("div",ss,[s("div",ts,[t[7]||(t[7]=L('<div class="panel-header" data-v-239f02dd><div data-v-239f02dd><p class="panel-subtitle" data-v-239f02dd>近7日 · 工作量分布</p><h3 class="panel-title" data-v-239f02dd>告警与工单趋势</h3></div><div class="legend" data-v-239f02dd><span class="legend-dot legend-dot--green" data-v-239f02dd></span><span data-v-239f02dd>工单完成</span><span class="legend-dot legend-dot--blue" data-v-239f02dd></span><span data-v-239f02dd>告警闭环</span></div></div>',1)),s("div",es,[(i(),r("svg",as,[s("path",{d:x(v,"inbound"),class:"area area--green"},null,8,ds),s("path",{d:x(v,"outbound"),class:"area area--blue"},null,8,ls),s("path",{d:m(v,"inbound"),class:"line line--green"},null,8,os),s("path",{d:m(v,"outbound"),class:"line line--blue"},null,8,ns)])),s("div",is,[s("div",rs,[t[4]||(t[4]=s("p",{class:"footer-label"},"最新工单",-1)),s("p",us,n(C.value.inbound)+" 条",1),a(d(c),{size:"small",type:"success",round:""},{default:o(()=>t[3]||(t[3]=[u("8h平均处理")])),_:1})]),s("div",cs,[t[6]||(t[6]=s("p",{class:"footer-label"},"最新告警",-1)),s("p",ps,n(C.value.outbound)+" 条",1),a(d(c),{size:"small",type:"warning",round:""},{default:o(()=>t[5]||(t[5]=[u("自动派单")])),_:1})])])])]),s("div",vs,[t[10]||(t[10]=L('<div class="panel-header" data-v-239f02dd><div data-v-239f02dd><p class="panel-subtitle" data-v-239f02dd>班次与值守</p><h3 class="panel-title" data-v-239f02dd>班次分布</h3></div><div class="legend" data-v-239f02dd><span class="legend-dot legend-dot--blue" data-v-239f02dd></span><span data-v-239f02dd>早班</span><span class="legend-dot legend-dot--green" data-v-239f02dd></span><span data-v-239f02dd>中班</span><span class="legend-dot legend-dot--gray" data-v-239f02dd></span><span data-v-239f02dd>夜班</span></div></div>',1)),s("div",bs,[(i(),r("svg",hs,[t[8]||(t[8]=s("circle",{cx:"60",cy:"60",r:"48",class:"donut-bg"},null,-1)),(i(),r(y,null,w(g,(e,h)=>s("circle",{key:e.label,cx:"60",cy:"60",r:"48",class:"donut-segment",stroke:e.color,"stroke-dasharray":`${e.value/k.value*301.44} 301.44`,"stroke-dashoffset":g.slice(0,h).reduce((f,_)=>f+_.value/k.value*301.44,0)},null,8,_s)),64)),t[9]||(t[9]=s("text",{x:"60",y:"55","text-anchor":"middle",class:"donut-text"},"总值守",-1)),s("text",fs,n(k.value),1)])),s("div",gs,[(i(),r(y,null,w(g,e=>s("div",{key:e.label,class:"donut-legend__item"},[s("span",{class:"legend-dot",style:M({background:e.color})},null,4),s("span",ms,n(e.label),1),s("span",xs,n(e.value),1)])),64))])])]),s("div",ys,[t[15]||(t[15]=s("div",{class:"panel-header"},[s("div",null,[s("p",{class:"panel-subtitle"},"近7日 · 出勤情况"),s("h3",{class:"panel-title"},"在线与巡检工时")])],-1)),s("div",ws,[(i(),r("svg",ks,[s("path",{d:x(b,"inbound"),class:"area area--green"},null,8,Ns),s("path",{d:x(b,"outbound"),class:"area area--blue"},null,8,$s),s("path",{d:m(b,"inbound"),class:"line line--green"},null,8,Fs),s("path",{d:m(b,"outbound"),class:"line line--blue"},null,8,Vs)])),s("div",zs,[s("div",Bs,[t[12]||(t[12]=s("p",{class:"footer-label"},"在线工时",-1)),s("p",Cs,n(D.value.inbound)+" h",1),a(d(c),{size:"small",type:"info",round:""},{default:o(()=>t[11]||(t[11]=[u("值守")])),_:1})]),s("div",Ds,[t[14]||(t[14]=s("p",{class:"footer-label"},"巡检工时",-1)),s("p",Ls,n(D.value.outbound)+" h",1),a(d(c),{size:"small",type:"success",round:""},{default:o(()=>t[13]||(t[13]=[u("现场")])),_:1})])])])]),s("div",Ms,[t[16]||(t[16]=s("div",{class:"panel-header"},[s("div",null,[s("p",{class:"panel-subtitle"},"热点问题"),s("h3",{class:"panel-title"},"近7日·用户&设备反馈")])],-1)),s("div",Ss,[(i(),r(y,null,w(A,e=>s("span",{key:e.label,class:"word-item",style:M({fontSize:`${12+e.weight}px`,opacity:.6+e.weight/30})},n(e.label),5)),64))])])]),a(d(R),{dashed:""}),s("div",As,[a(d(V),{class:"bottom-card",bordered:!1},{default:o(()=>[s("div",Ps,[t[18]||(t[18]=s("h4",null,"网关健康度",-1)),a(d(c),{type:"info",size:"small",round:""},{default:o(()=>t[17]||(t[17]=[u("实时")])),_:1})]),s("div",Ts,[s("div",Xs,[t[19]||(t[19]=s("span",{class:"health-label"},"CPU占用",-1)),a(d(z),{type:"line",percentage:62,"indicator-placement":"inside",color:"#2468F2"})]),s("div",js,[t[20]||(t[20]=s("span",{class:"health-label"},"内存占用",-1)),a(d(z),{type:"line",percentage:48,"indicator-placement":"inside",color:"#3CBC8F"})]),s("div",Gs,[t[21]||(t[21]=s("span",{class:"health-label"},"网络可用性",-1)),a(d(z),{type:"line",percentage:95,"indicator-placement":"inside",color:"#16a34a"})])])]),_:1}),a(d(V),{class:"bottom-card",bordered:!1},{default:o(()=>[s("div",Rs,[t[23]||(t[23]=s("h4",null,"待处理事项",-1)),a(d(c),{type:"warning",size:"small",round:""},{default:o(()=>t[22]||(t[22]=[u("3")])),_:1})]),t[24]||(t[24]=s("div",{class:"todo-list"},[s("div",{class:"todo-item"},[s("span",{class:"dot dot--warning"}),s("div",null,[s("p",{class:"todo-title"},"西门摄像头离线，等待重启"),s("p",{class:"todo-desc"},"已自动派单，巡检工单 #A-2031")])]),s("div",{class:"todo-item"},[s("span",{class:"dot dot--info"}),s("div",null,[s("p",{class:"todo-title"},"停车场满位预测模型更新"),s("p",{class:"todo-desc"},"新模型已训练，等待灰度发布")])]),s("div",{class:"todo-item"},[s("span",{class:"dot dot--success"}),s("div",null,[s("p",{class:"todo-title"},"照明控制节能策略"),s("p",{class:"todo-desc"},"通过仿真，节能率提升 6.2%")])])],-1))]),_:1})])]))}});const Zs=q(qs,[["__scopeId","data-v-239f02dd"]]);export{Zs as default};
