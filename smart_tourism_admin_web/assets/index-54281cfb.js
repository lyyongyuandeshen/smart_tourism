import{d as ae,r as u,bS as _,a2 as le,n as ie,$ as oe,o as M,c as P,b as i,ab as s,R as o,w as v,bU as ne,a as t,a8 as q,N as b,aS as y,ac as T,ah as z,a5 as L,a6 as c,bW as se,ad as R,ai as $,a1 as re,b7 as pe}from"./index-5805bd08.js";import{N as V}from"./Space-a5c105a8.js";import{N as B}from"./DatePicker-8deac17c.js";import{N as de}from"./DataTable-f0affd58.js";import{N as ue}from"./Pagination-78bedb34.js";import{N as ce}from"./Form-9e4f5768.js";import{N as m}from"./FormItem-8b481c62.js";import"./Forward-dbe0c59b.js";const ve={class:"inspection-container"},me={class:"header-section"},ge={class:"header-menu"},ke={class:"menu-buttons"},ye={class:"filter-section"},be={class:"filter-content"},fe={class:"filter-item"},we={class:"filter-item"},Ce={class:"filter-item"},he={class:"filter-item"},Ne={class:"filter-item"},xe={class:"filter-item"},Se={class:"filter-actions"},_e={class:"content-section"},Te={class:"content-wrapper"},ze={class:"table-container"},Le={class:"table-header"},Ue={class:"table-wrapper"},Ie={class:"pagination-wrapper"},De={class:"total-count"},Me={key:0,class:"detail-content"},Pe={class:"detail-item"},qe={class:"detail-value"},Re={class:"detail-item"},$e={class:"detail-value"},Ve={class:"detail-item"},Be={class:"detail-item"},Oe={class:"detail-item"},We={class:"detail-value"},Fe={class:"detail-item"},Ee={class:"detail-value"},Ke={class:"detail-item"},Ae={class:"detail-value"},He={class:"detail-item"},Qe={class:"detail-value"},je={class:"detail-item"},Ge={class:"detail-value"},Je=ae({__name:"index",setup(Xe){const C=u("inspection"),U=n=>{C.value=n},r=_({inspectionCode:null,workContent:null,status:null,workCategory:null,inspectionTime:null,principal:null}),O=u([{label:"全部状态",value:"all"},{label:"待开始",value:"pending"},{label:"进行中",value:"in_progress"},{label:"已完成",value:"completed"},{label:"已逾期",value:"overdue"}]),W=u([{label:"全部分类",value:"all"},{label:"日常巡检",value:"daily"},{label:"设备检修",value:"maintenance"},{label:"安全检查",value:"safety"},{label:"环境卫生",value:"sanitation"}]),F=u([{label:"低",value:"low"},{label:"中",value:"medium"},{label:"高",value:"high"},{label:"紧急",value:"urgent"}]),E=u([{label:"全部负责人",value:"all"},{label:"张三",value:"zhangsan"},{label:"李四",value:"lisi"},{label:"王五",value:"wangwu"},{label:"赵六",value:"zhaoliu"}]),g=u(!1),f=u("新增巡检任务"),I=u(null),l=_({taskName:"",inspectionLocation:"",workContent:"",workCategory:"",principal:"",priority:"",inspectionTime:null}),w=u(!1),d=u(null),K=()=>{console.log("查询条件:",r),h.info("查询成功")},A=()=>{r.inspectionCode=null,r.workContent=null,r.status=null,r.workCategory=null,r.inspectionTime=null,r.principal=null},h=le(),k=u([{id:1,inspectionCode:"INS001",taskName:"景区入口监控设备检查",status:"pending",priority:"high",inspectionLocation:"景区入口",inspectionTime:"2024-01-20 09:00:00",workContent:"检查监控设备运行状态",workCategory:"设备检修",principal:"张三"},{id:2,inspectionCode:"INS002",taskName:"主道路照明设备巡检",status:"in_progress",priority:"medium",inspectionLocation:"主道路",inspectionTime:"2024-01-20 10:00:00",workContent:"巡查道路照明设备",workCategory:"日常巡检",principal:"李四"},{id:3,inspectionCode:"INS003",taskName:"广场消防安全检查",status:"completed",priority:"urgent",inspectionLocation:"广场中心",inspectionTime:"2024-01-19 14:00:00",workContent:"消防设施安全检查",workCategory:"安全检查",principal:"王五"},{id:4,inspectionCode:"INS004",taskName:"停车场环境卫生检查",status:"completed",priority:"low",inspectionLocation:"停车场",inspectionTime:"2024-01-19 08:00:00",workContent:"检查停车场卫生状况",workCategory:"环境卫生",principal:"赵六"},{id:5,inspectionCode:"INS005",taskName:"休息区设施检查",status:"pending",priority:"medium",inspectionLocation:"休息区",inspectionTime:"2024-01-20 15:00:00",workContent:"检查休息区设施完好性",workCategory:"日常巡检",principal:"张三"},{id:6,inspectionCode:"INS006",taskName:"湖边小径照明检修",status:"overdue",priority:"high",inspectionLocation:"湖边小径",inspectionTime:"2024-01-18 16:00:00",workContent:"修复损坏的照明设备",workCategory:"设备检修",principal:"李四"},{id:7,inspectionCode:"INS007",taskName:"观景台安全检查",status:"in_progress",priority:"urgent",inspectionLocation:"观景台",inspectionTime:"2024-01-20 11:00:00",workContent:"观景台护栏安全检查",workCategory:"安全检查",principal:"王五"},{id:8,inspectionCode:"INS008",taskName:"音乐喷泉设备维护",status:"pending",priority:"medium",inspectionLocation:"音乐喷泉",inspectionTime:"2024-01-21 09:00:00",workContent:"喷泉设备定期维护",workCategory:"设备检修",principal:"张三"},{id:9,inspectionCode:"INS009",taskName:"儿童游乐区日常巡检",status:"completed",priority:"high",inspectionLocation:"儿童游乐区",inspectionTime:"2024-01-19 10:00:00",workContent:"游乐设施安全检查",workCategory:"安全检查",principal:"赵六"},{id:10,inspectionCode:"INS010",taskName:"美食街卫生检查",status:"pending",priority:"medium",inspectionLocation:"美食街",inspectionTime:"2024-01-20 13:00:00",workContent:"检查美食街环境卫生",workCategory:"环境卫生",principal:"李四"}]),D=u([]),N={pending:{label:"待开始",color:"#909399"},in_progress:{label:"进行中",color:"#1890ff"},completed:{label:"已完成",color:"#52c41a"},overdue:{label:"已逾期",color:"#ff4d4f"}},x={low:{label:"低",color:"#909399"},medium:{label:"中",color:"#faad14"},high:{label:"高",color:"#ff9800"},urgent:{label:"紧急",color:"#ff4d4f"}},H=u((()=>[{type:"selection"},{title:"巡检编号",key:"inspectionCode",width:120},{title:"任务名称",key:"taskName",width:200},{title:"状态",key:"status",width:120,render:n=>{const e=N[n.status];return v("div",{class:"status-cell",style:"display: inline-flex; align-items: center; gap: 6px;"},[v("span",{class:"status-dot",style:{width:"8px",height:"8px",minWidth:"8px",minHeight:"8px",borderRadius:"50%",display:"inline-block",flexShrink:"0",backgroundColor:e.color}}),v("span",{class:"status-text",style:"font-size: 14px; color: #333;"},e.label)])}},{title:"优先级",key:"priority",width:100,render:n=>{const e=x[n.priority];return v("span",{style:{color:e.color,fontWeight:"600"}},e.label)}},{title:"巡检地点",key:"inspectionLocation",width:150},{title:"巡检时间",key:"inspectionTime",width:180},{title:"操作",key:"actions",width:150,render:n=>v("div",{class:"action-cell",style:"display: inline-flex; align-items: center; gap: 8px;"},[v("span",{class:"action-link detail",style:{fontSize:"14px",color:"#1890ff",cursor:"pointer"},onClick:()=>X(n)},"详情"),v("span",{class:"action-divider",style:{color:"#d9d9d9"}},"|"),v("span",{class:"action-link edit",style:{fontSize:"14px",color:"#1890ff",cursor:"pointer"},onClick:()=>Y(n)},"编辑")])}])()),p=_({page:1,pageSize:10,itemCount:0,pageSizes:[10,20,30,50],showSizePicker:!0,onUpdatePage:n=>{p.page=n,S()},onUpdatePageSize:n=>{p.pageSize=n,p.page=1,S()}}),S=()=>{p.itemCount=k.value.length},Q=ie(()=>{const n=(p.page-1)*p.pageSize,e=n+p.pageSize;return k.value.slice(n,e)}),j=()=>{f.value="新增巡检任务",l.taskName="",l.inspectionLocation="",l.workContent="",l.workCategory="",l.principal="",l.priority="",l.inspectionTime=null,g.value=!0},G=()=>{var n;(n=I.value)==null||n.validate(e=>{if(!e){if(f.value==="新增巡检任务"){const a=k.value.length>0?Math.max(...k.value.map(te=>te.id))+1:1,Z=`INS${String(a).padStart(3,"0")}`,ee={id:a,inspectionCode:Z,taskName:l.taskName,status:"pending",priority:l.priority,inspectionLocation:l.inspectionLocation,inspectionTime:l.inspectionTime?new Date(l.inspectionTime).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).replace(/\//g,"-"):"",workContent:l.workContent,workCategory:l.workCategory,principal:l.principal};k.value.push(ee),p.itemCount=k.value.length,h.success("新增巡检任务成功")}else h.success("编辑巡检任务成功");g.value=!1}})},J=()=>{g.value=!1},X=n=>{d.value=n,w.value=!0},Y=n=>{f.value="编辑巡检任务",l.taskName=n.taskName,l.inspectionLocation=n.inspectionLocation,l.workContent=n.workContent,l.workCategory=n.workCategory,l.principal=n.principal,l.priority=n.priority,l.inspectionTime=new Date(n.inspectionTime).getTime(),g.value=!0};return oe(()=>{S()}),(n,e)=>(M(),P("div",ve,[i(o(se),{"has-sider":"",class:"h-full w-full"},{default:s(()=>[i(o(ne),{class:"h-full flex flex-col"},{default:s(()=>[t("div",me,[e[21]||(e[21]=t("div",{class:"header-title"},"巡检任务",-1)),t("div",ge,[t("div",ke,[t("span",{onClick:e[0]||(e[0]=a=>U("inspection")),class:q(["menu-button",{"menu-button-active":C.value==="inspection"}])}," 巡检任务 ",2),t("span",{onClick:e[1]||(e[1]=a=>U("personnel")),class:q(["menu-button",{"menu-button-active":C.value==="personnel"}])}," 人员管理 ",2)])]),e[22]||(e[22]=t("div",{class:"header-placeholder"},null,-1))]),t("div",ye,[t("div",be,[i(o(V),{size:16,align:"center",wrap:""},{default:s(()=>[t("div",fe,[e[23]||(e[23]=t("span",{class:"filter-label"},"巡检编号：",-1)),i(o(b),{value:r.inspectionCode,"onUpdate:value":e[2]||(e[2]=a=>r.inspectionCode=a),placeholder:"请输入巡检编号",clearable:"",style:{width:"180px"}},null,8,["value"])]),t("div",we,[e[24]||(e[24]=t("span",{class:"filter-label"},"工作内容：",-1)),i(o(b),{value:r.workContent,"onUpdate:value":e[3]||(e[3]=a=>r.workContent=a),placeholder:"请输入工作内容",clearable:"",style:{width:"180px"}},null,8,["value"])]),t("div",Ce,[e[25]||(e[25]=t("span",{class:"filter-label"},"状态：",-1)),i(o(y),{value:r.status,"onUpdate:value":e[4]||(e[4]=a=>r.status=a),options:O.value,placeholder:"请选择状态",clearable:"",style:{width:"180px"}},null,8,["value","options"])]),t("div",he,[e[26]||(e[26]=t("span",{class:"filter-label"},"工作分类：",-1)),i(o(y),{value:r.workCategory,"onUpdate:value":e[5]||(e[5]=a=>r.workCategory=a),options:W.value,placeholder:"请选择工作分类",clearable:"",style:{width:"180px"}},null,8,["value","options"])]),t("div",Ne,[e[27]||(e[27]=t("span",{class:"filter-label"},"巡检时间：",-1)),i(o(B),{value:r.inspectionTime,"onUpdate:value":e[6]||(e[6]=a=>r.inspectionTime=a),type:"datetimerange",placeholder:"请选择巡检时间",clearable:"",style:{width:"400px"}},null,8,["value"])]),t("div",xe,[e[28]||(e[28]=t("span",{class:"filter-label"},"负责人：",-1)),i(o(y),{value:r.principal,"onUpdate:value":e[7]||(e[7]=a=>r.principal=a),options:E.value,placeholder:"请选择负责人",clearable:"",style:{width:"180px"}},null,8,["value","options"])])]),_:1})]),e[31]||(e[31]=t("div",{class:"filter-divider"},null,-1)),t("div",Se,[i(o(V),{size:12,vertical:""},{default:s(()=>[i(o(T),{type:"primary",class:"filter-btn",onClick:K},{icon:s(()=>[i(o(z),{icon:"ri:search-line"})]),default:s(()=>[e[29]||(e[29]=L(" 查询 ",-1))]),_:1}),i(o(T),{class:"reset-btn",onClick:A},{icon:s(()=>[i(o(z),{icon:"ri:refresh-line"})]),default:s(()=>[e[30]||(e[30]=L(" 重置 ",-1))]),_:1})]),_:1})])]),t("div",_e,[t("div",Te,[t("div",ze,[t("div",Le,[i(o(T),{type:"primary",class:"add-btn",onClick:j},{icon:s(()=>[i(o(z),{icon:"ri:add-line"})]),default:s(()=>[e[32]||(e[32]=L(" 新增巡检任务 ",-1))]),_:1})]),t("div",Ue,[i(o(de),{columns:H.value,data:Q.value,pagination:!1,"row-key":a=>a.id,"checked-row-keys":D.value,"onUpdate:checkedRowKeys":e[8]||(e[8]=a=>D.value=a),striped:""},null,8,["columns","data","row-key","checked-row-keys"])]),t("div",Ie,[t("span",De,"共 "+c(p.itemCount)+" 条",1),i(o(ue),{page:p.page,"onUpdate:page":[e[9]||(e[9]=a=>p.page=a),p.onUpdatePage],"page-size":p.pageSize,"onUpdate:pageSize":[e[10]||(e[10]=a=>p.pageSize=a),p.onUpdatePageSize],"item-count":p.itemCount,"page-sizes":p.pageSizes,"show-size-picker":""},null,8,["page","page-size","item-count","page-sizes","onUpdate:page","onUpdate:pageSize"])])])])])]),_:1})]),_:1}),i(o(R),{show:g.value,"onUpdate:show":e[18]||(e[18]=a=>g.value=a),"show-icon":!1,preset:"dialog",title:f.value,"positive-text":"确定","negative-text":"取消",onPositiveClick:G,onNegativeClick:J,style:{width:"600px"},class:"inspection-modal"},{default:s(()=>[i(o(ce),{ref_key:"formRef",ref:I,model:l,rules:{taskName:{required:!0,message:"请输入任务名称",trigger:"blur"},inspectionLocation:{required:!0,message:"请输入巡检地点",trigger:"blur"},workContent:{required:!0,message:"请输入工作内容",trigger:"blur"},workCategory:{required:!0,message:"请选择工作分类",trigger:"change"},principal:{required:!0,message:"请选择负责人",trigger:"change"},priority:{required:!0,message:"请选择优先级",trigger:"change"},inspectionTime:{required:!0,message:"请选择巡检时间",trigger:"change",type:"number"}},"label-placement":"left","label-width":"100px"},{default:s(()=>[i(o(m),{label:"任务名称",path:"taskName"},{default:s(()=>[i(o(b),{value:l.taskName,"onUpdate:value":e[11]||(e[11]=a=>l.taskName=a),placeholder:"请输入任务名称",clearable:""},null,8,["value"])]),_:1}),i(o(m),{label:"巡检地点",path:"inspectionLocation"},{default:s(()=>[i(o(b),{value:l.inspectionLocation,"onUpdate:value":e[12]||(e[12]=a=>l.inspectionLocation=a),placeholder:"请输入巡检地点",clearable:""},null,8,["value"])]),_:1}),i(o(m),{label:"工作内容",path:"workContent"},{default:s(()=>[i(o(b),{value:l.workContent,"onUpdate:value":e[13]||(e[13]=a=>l.workContent=a),type:"textarea",placeholder:"请输入工作内容",rows:3,clearable:""},null,8,["value"])]),_:1}),i(o(m),{label:"工作分类",path:"workCategory"},{default:s(()=>[i(o(y),{value:l.workCategory,"onUpdate:value":e[14]||(e[14]=a=>l.workCategory=a),options:[{label:"日常巡检",value:"日常巡检"},{label:"设备检修",value:"设备检修"},{label:"安全检查",value:"安全检查"},{label:"环境卫生",value:"环境卫生"}],placeholder:"请选择工作分类",clearable:""},null,8,["value"])]),_:1}),i(o(m),{label:"负责人",path:"principal"},{default:s(()=>[i(o(y),{value:l.principal,"onUpdate:value":e[15]||(e[15]=a=>l.principal=a),options:[{label:"张三",value:"张三"},{label:"李四",value:"李四"},{label:"王五",value:"王五"},{label:"赵六",value:"赵六"}],placeholder:"请选择负责人",clearable:""},null,8,["value"])]),_:1}),i(o(m),{label:"优先级",path:"priority"},{default:s(()=>[i(o(y),{value:l.priority,"onUpdate:value":e[16]||(e[16]=a=>l.priority=a),options:F.value,placeholder:"请选择优先级",clearable:""},null,8,["value","options"])]),_:1}),i(o(m),{label:"巡检时间",path:"inspectionTime"},{default:s(()=>[i(o(B),{value:l.inspectionTime,"onUpdate:value":e[17]||(e[17]=a=>l.inspectionTime=a),type:"datetime",placeholder:"请选择巡检时间",clearable:"",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","title"]),i(o(R),{show:w.value,"onUpdate:show":e[19]||(e[19]=a=>w.value=a),"show-icon":!1,preset:"dialog",title:"巡检任务详情","positive-text":"关闭",onPositiveClick:e[20]||(e[20]=a=>w.value=!1),style:{width:"600px"},class:"detail-modal"},{default:s(()=>[d.value?(M(),P("div",Me,[t("div",Pe,[e[33]||(e[33]=t("span",{class:"detail-label"},"巡检编号：",-1)),t("span",qe,c(d.value.inspectionCode),1)]),t("div",Re,[e[34]||(e[34]=t("span",{class:"detail-label"},"任务名称：",-1)),t("span",$e,c(d.value.taskName),1)]),t("div",Ve,[e[35]||(e[35]=t("span",{class:"detail-label"},"状态：",-1)),t("span",{class:"detail-value",style:$({color:N[d.value.status].color})},c(N[d.value.status].label),5)]),t("div",Be,[e[36]||(e[36]=t("span",{class:"detail-label"},"优先级：",-1)),t("span",{class:"detail-value",style:$({color:x[d.value.priority].color,fontWeight:"600"})},c(x[d.value.priority].label),5)]),t("div",Oe,[e[37]||(e[37]=t("span",{class:"detail-label"},"巡检地点：",-1)),t("span",We,c(d.value.inspectionLocation),1)]),t("div",Fe,[e[38]||(e[38]=t("span",{class:"detail-label"},"巡检时间：",-1)),t("span",Ee,c(d.value.inspectionTime),1)]),t("div",Ke,[e[39]||(e[39]=t("span",{class:"detail-label"},"工作内容：",-1)),t("span",Ae,c(d.value.workContent),1)]),t("div",He,[e[40]||(e[40]=t("span",{class:"detail-label"},"工作分类：",-1)),t("span",Qe,c(d.value.workCategory),1)]),t("div",je,[e[41]||(e[41]=t("span",{class:"detail-label"},"负责人：",-1)),t("span",Ge,c(d.value.principal),1)])])):re("",!0)]),_:1},8,["show"])]))}});const st=pe(Je,[["__scopeId","data-v-353c47fc"]]);export{st as default};
