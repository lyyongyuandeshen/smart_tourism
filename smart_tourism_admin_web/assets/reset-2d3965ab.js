import{d as P,o as m,c as f,a as t,d6 as q,bR as D,a2 as F,bS as R,r as g,n as V,b as a,ab as i,R as o,ai as T,a6 as d,d7 as b,a5 as p,a1 as k,N as y,ca as w,ac as x,d8 as U,dc as W,db as j,b6 as z}from"./index-fc2ca07d.js";import{K as A}from"./KeyOutline-d5ae6f7b.js";import{u as K,L as S}from"./LockClosedOutline-68879227.js";const H={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},G=P({name:"MailOutline",render:function(n,c){return m(),f("svg",H,c[0]||(c[0]=[t("rect",{x:"48",y:"96",width:"416",height:"320",rx:"40",ry:"40",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M112 160l144 112l144-112"},null,-1)]))}}),J={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Q=P({name:"ReloadOutline",render:function(n,c){return m(),f("svg",J,c[0]||(c[0]=[t("path",{d:"M400 148l-21.12-24.57A191.43 191.43 0 0 0 240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 0 0 181.07-128",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32"},null,-1),t("path",{d:"M464 97.42V208a16 16 0 0 1-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z",fill:"currentColor"},null,-1)]))}}),X={class:"login-container"},Y={class:"login-content"},Z={class:"form-wrapper"},ee={class:"login-methods"},se={class:"active-method"},te={class:"form-content"},oe={class:"input-group"},re={class:"input-label-row"},ae={key:0,class:"error-message"},ne={class:"input-group"},le={class:"input-label-row"},ie={key:0,class:"error-message"},de={class:"verification-code-row"},ce={class:"input-group"},ue={class:"input-label-row"},pe={key:0,class:"error-message"},me={class:"input-group"},fe={class:"input-label-row"},ve={key:0,class:"error-message"},we={class:"action-buttons"},_e={class:"login-prompt"},he=P({__name:"reset",setup(N){const{t:n}=q(),c=D(),_=F(),C=K(),r=R({email:"",code:"",password:"",confirmPassword:""}),$=g(!1),B=g(!1),s=R({email:"",code:"",password:"",confirmPassword:""});function I(){let e=!0;return r.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)?s.email="":(s.email=n("reset.invalidEmail"),e=!1):(s.email=n("reset.usernameOrPasswordEmpty"),e=!1),r.code?s.code="":(s.code=n("reset.codeRequired"),e=!1),r.password?s.password="":(s.password=n("reset.passwordRequired"),e=!1),r.confirmPassword?r.password!==r.confirmPassword?(s.confirmPassword=n("reset.passwordMismatch"),e=!1):s.confirmPassword="":(s.confirmPassword=n("reset.confirmPasswordRequired"),e=!1),e}async function M(e){if(e.preventDefault(),!!I())try{$.value=!0,await W(r.email,r.password,r.code),_.success(n("reset.resetSuccess")),c.push("/login")}catch(l){_.error(l.message||n("reset.resetFailed"))}finally{$.value=!1}}const v=g(!1),h=g(60),O=V(()=>v.value?`${h.value}s`:n("reset.get_verification_code"));async function E(){if(r.email)if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email))s.email="";else{s.email=n("reset.invalidEmail");return}else{s.email=n("reset.emailRequired");return}if(!v.value)try{v.value=!0,await j(r.email),_.success(n("reset.codeSent")),h.value=60;const e=setInterval(()=>{h.value--,h.value<=0&&(clearInterval(e),v.value=!1)},1e3)}catch(e){_.error(e.message||n("reset.sendCodeFailed")),v.value=!1}}const L=V(()=>({background:C.value.bodyColor.startsWith("#1")||C.value.bodyColor.startsWith("#2")||C.value.bodyColor.startsWith("#3")?"linear-gradient(135deg, #003b8e, #0058d9)":"linear-gradient(135deg, #1867c0, #5cbbf6)"}));return(e,l)=>(m(),f("div",X,[a(o(U),{show:B.value},{default:i(()=>[t("div",Y,[t("div",{class:"brand-section",style:T(L.value)},l[5]||(l[5]=[t("div",{class:"brand-content"},[t("h1",{class:"brand-title"},"AI知识库系统"),t("p",{class:"brand-description"}," 企业级智能知识管理平台，助力数字化转型 ")],-1)]),4),t("div",Z,[t("div",ee,[t("div",se,d(e.$t("reset.reset")),1)]),t("div",te,[t("div",oe,[t("div",re,[a(o(b),{strong:"",class:"input-label"},{default:i(()=>[p(d(e.$t("reset.email")),1)]),_:1}),s.email?(m(),f("div",ae,d(s.email),1)):k("",!0)]),a(o(y),{value:r.email,"onUpdate:value":l[0]||(l[0]=u=>r.email=u),placeholder:e.$t("reset.enter_email"),round:"",clearable:"",class:"custom-input",status:s.email?"error":void 0},{prefix:i(()=>[a(o(w),{component:o(G)},null,8,["component"])]),_:1},8,["value","placeholder","status"])]),t("div",ne,[t("div",le,[a(o(b),{strong:"",class:"input-label"},{default:i(()=>[p(d(e.$t("reset.verification_code")),1)]),_:1}),s.code?(m(),f("div",ie,d(s.code),1)):k("",!0)]),t("div",de,[a(o(y),{value:r.code,"onUpdate:value":l[1]||(l[1]=u=>r.code=u),placeholder:e.$t("reset.enter_verification_code"),round:"",class:"verification-input",status:s.code?"error":void 0},{prefix:i(()=>[a(o(w),{component:o(A)},null,8,["component"])]),_:1},8,["value","placeholder","status"]),a(o(x),{disabled:v.value,onClick:E,class:"send-code-button"},{default:i(()=>[p(d(O.value),1)]),_:1},8,["disabled"])])]),t("div",ce,[t("div",ue,[a(o(b),{strong:"",class:"input-label"},{default:i(()=>[p(d(e.$t("reset.new_password")),1)]),_:1}),s.password?(m(),f("div",pe,d(s.password),1)):k("",!0)]),a(o(y),{value:r.password,"onUpdate:value":l[2]||(l[2]=u=>r.password=u),type:"password",placeholder:e.$t("reset.enter_new_password"),round:"","show-password-on":"click",class:"custom-input",status:s.password?"error":void 0},{prefix:i(()=>[a(o(w),{component:o(S)},null,8,["component"])]),_:1},8,["value","placeholder","status"])]),t("div",me,[t("div",fe,[a(o(b),{strong:"",class:"input-label"},{default:i(()=>[p(d(e.$t("reset.confirm_password")),1)]),_:1}),s.confirmPassword?(m(),f("div",ve,d(s.confirmPassword),1)):k("",!0)]),a(o(y),{value:r.confirmPassword,"onUpdate:value":l[3]||(l[3]=u=>r.confirmPassword=u),type:"password",placeholder:e.$t("reset.enter_confirm_password"),round:"","show-password-on":"click",class:"custom-input",status:s.confirmPassword?"error":void 0},{prefix:i(()=>[a(o(w),{component:o(S)},null,8,["component"])]),_:1},8,["value","placeholder","status"])]),t("div",we,[a(o(x),{type:"primary",block:"",loading:$.value,onClick:M,class:"reset-button"},{icon:i(()=>[a(o(w),{component:o(Q)},null,8,["component"])]),default:i(()=>[p(" "+d(e.$t("reset.reset")),1)]),_:1},8,["loading"])]),t("div",_e,[p(d(e.$t("reset.reset_ok"))+" ",1),a(o(x),{text:"",type:"primary",onClick:l[4]||(l[4]=u=>o(c).push("/login"))},{default:i(()=>[p(d(e.$t("reset.login")),1)]),_:1})])])])])]),_:1},8,["show"])]))}});const ye=z(he,[["__scopeId","data-v-b0863f26"]]);export{ye as default};
