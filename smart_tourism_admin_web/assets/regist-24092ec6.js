import{d as O,d6 as U,bR as q,a2 as E,bS as N,r as w,n as S,o as f,c as g,b as a,ab as l,R as o,a as t,ai as F,a6 as d,d7 as h,a5 as u,a1 as b,N as y,ca as v,ac as P,d8 as W,da as K,db as M,b6 as x}from"./index-fc2ca07d.js";import{P as z,L as A}from"./PersonOutline-2bc06d6f.js";import{K as j}from"./KeyOutline-d5ae6f7b.js";import{u as G,L as V}from"./LockClosedOutline-68879227.js";const H={class:"login-container"},J={class:"login-content"},Q={class:"form-wrapper"},X={class:"login-methods"},Y={class:"active-method"},Z={class:"form-content"},ee={class:"input-group"},se={class:"input-label-row"},re={key:0,class:"error-message"},oe={class:"input-group"},te={class:"input-label-row"},ae={key:0,class:"error-message"},ne={class:"verification-code-row"},ie={class:"input-group"},le={class:"input-label-row"},de={key:0,class:"error-message"},ce={class:"input-group"},ue={class:"input-label-row"},pe={key:0,class:"error-message"},me={class:"action-buttons"},fe={class:"login-prompt"},ge=O({__name:"regist",setup(ve){const{t:n}=U(),C=q(),p=E(),k=G(),r=N({username:"",code:"",password:"",confirmPassword:""}),$=w(!1),I=w(!1),s=N({username:"",email:"",code:"",password:"",confirmPassword:""});function R(){let e=!0;return r.username?r.username.length<3?(s.username=n("register.usernameTooShort"),e=!1):s.username="":(s.username=n("register.invalid_account"),e=!1),r.username?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.username)?s.email="":(s.email=n("register.invalidEmail"),e=!1):(s.email=n("register.enter_email"),e=!1),r.code?s.code="":(s.code=n("register.codeRequired"),e=!1),r.password?r.password.length<6?(s.password=n("register.passwordTooShort"),e=!1):s.password="":(s.password=n("register.passwordRequired"),e=!1),r.confirmPassword?r.password!==r.confirmPassword?(s.confirmPassword=n("register.passwordMismatch"),e=!1):s.confirmPassword="":(s.confirmPassword=n("register.confirmPasswordRequired"),e=!1),e}async function L(e){if(e.preventDefault(),!!R())try{$.value=!0,await K(r.username,r.password,r.code),p.success(n("register.registration_success")),C.push("/login")}catch(i){p.error(i.message||n("register.registration_failed"))}finally{$.value=!1}}const m=w(!1),_=w(60),T=S(()=>m.value?`${_.value}s`:n("register.get_verification_code"));async function B(){if(r.username){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.username)){p.error("请输入正确的邮箱!");return}}else{p.error("用户名不能为空!");return}if(!m.value)try{m.value=!0,await M(r.username),p.success(n("register.send_success")),_.value=60;const e=setInterval(()=>{_.value--,_.value<=0&&(clearInterval(e),m.value=!1)},1e3)}catch(e){p.error(e.message||n("register.sendCodeFailed")),m.value=!1}}const D=S(()=>({background:k.value.bodyColor.startsWith("#1")||k.value.bodyColor.startsWith("#2")||k.value.bodyColor.startsWith("#3")?"linear-gradient(135deg, #003b8e, #0058d9)":"linear-gradient(135deg, #1867c0, #5cbbf6)"}));return(e,i)=>(f(),g("div",H,[a(o(W),{show:I.value},{default:l(()=>[t("div",J,[t("div",{class:"brand-section",style:F(D.value)},i[5]||(i[5]=[t("div",{class:"brand-content"},[t("h1",{class:"brand-title"},"AI知识库系统"),t("p",{class:"brand-description"}," 企业级智能知识管理平台，助力数字化转型 ")],-1)]),4),t("div",Q,[t("div",X,[t("div",Y,d(e.$t("register.create_account")),1)]),t("div",Z,[t("div",ee,[t("div",se,[a(o(h),{strong:"",class:"input-label"},{default:l(()=>[u(d(e.$t("register.email")),1)]),_:1}),s.username?(f(),g("div",re,d(s.username),1)):b("",!0)]),a(o(y),{value:r.username,"onUpdate:value":i[0]||(i[0]=c=>r.username=c),placeholder:e.$t("register.enter_email"),round:"",clearable:"",class:"custom-input",status:s.username?"error":void 0},{prefix:l(()=>[a(o(v),{component:o(z)},null,8,["component"])]),_:1},8,["value","placeholder","status"])]),t("div",oe,[t("div",te,[a(o(h),{strong:"",class:"input-label"},{default:l(()=>[u(d(e.$t("register.verification_code")),1)]),_:1}),s.code?(f(),g("div",ae,d(s.code),1)):b("",!0)]),t("div",ne,[a(o(y),{value:r.code,"onUpdate:value":i[1]||(i[1]=c=>r.code=c),placeholder:e.$t("register.enter_verification_code"),round:"",class:"verification-input",status:s.code?"error":void 0},{prefix:l(()=>[a(o(v),{component:o(j)},null,8,["component"])]),_:1},8,["value","placeholder","status"]),a(o(P),{disabled:m.value,onClick:B,class:"send-code-button"},{default:l(()=>[u(d(T.value),1)]),_:1},8,["disabled"])])]),t("div",ie,[t("div",le,[a(o(h),{strong:"",class:"input-label"},{default:l(()=>[u(d(e.$t("register.password")),1)]),_:1}),s.password?(f(),g("div",de,d(s.password),1)):b("",!0)]),a(o(y),{value:r.password,"onUpdate:value":i[2]||(i[2]=c=>r.password=c),type:"password",placeholder:e.$t("register.enter_password"),round:"","show-password-on":"click",class:"custom-input",status:s.password?"error":void 0},{prefix:l(()=>[a(o(v),{component:o(V)},null,8,["component"])]),_:1},8,["value","placeholder","status"])]),t("div",ce,[t("div",ue,[a(o(h),{strong:"",class:"input-label"},{default:l(()=>[u(d(e.$t("register.confirm_password")),1)]),_:1}),s.confirmPassword?(f(),g("div",pe,d(s.confirmPassword),1)):b("",!0)]),a(o(y),{value:r.confirmPassword,"onUpdate:value":i[3]||(i[3]=c=>r.confirmPassword=c),type:"password",placeholder:e.$t("register.enter_confirm_password"),round:"","show-password-on":"click",class:"custom-input",status:s.confirmPassword?"error":void 0},{prefix:l(()=>[a(o(v),{component:o(V)},null,8,["component"])]),_:1},8,["value","placeholder","status"])]),t("div",me,[a(o(P),{type:"primary",block:"",loading:$.value,onClick:L,class:"register-button"},{icon:l(()=>[a(o(v),{component:o(A)},null,8,["component"])]),default:l(()=>[u(" "+d(e.$t("register.register")),1)]),_:1},8,["loading"])]),t("div",fe,[u(d(e.$t("register.if_account"))+" ",1),a(o(P),{text:"",type:"primary",onClick:i[4]||(i[4]=c=>o(C).push("/login"))},{default:l(()=>[u(d(e.$t("register.go_login")),1)]),_:1})])])])])]),_:1},8,["show"])]))}});const ye=x(ge,[["__scopeId","data-v-13f2aced"]]);export{ye as default};
