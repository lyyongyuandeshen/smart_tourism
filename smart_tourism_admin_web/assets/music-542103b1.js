import{d as S,r as $,o as d,c as m,b as p,ab as _,a6 as r,R as i,al as I,a as t,X as z,m as x,bd as W,n as A,a2 as G,$ as Y,O as g,a4 as E,be as Z,b7 as H,N as O,a5 as R,aS as Q,aT as ee,ah as w,a9 as B,a1 as h,b8 as te,ac as ae,Q as F,a3 as P,aa as se,a8 as le,bc as J}from"./index-fc2ca07d.js";import{a as j,F as V,s as oe,r as X,l as ne,b as ie}from"./suno-48eb8c16.js";import{N as q}from"./Switch-3c24006e.js";import{N as K}from"./Slider-d06acfb6.js";const ue={key:0,class:"cursor-pointer"},re=S({__name:"mcUploadMp3",setup(L){const o=$(),s=$({process:"",id:"",isUpload:!1}),v=async y=>{for(let u=0;u<50;u++){let f=await j(`/uploads/audio/${y}`);x("ddd",f);let b=u+1;if(b>20&&(b=20),f.status=="complete"||f.status=="error")return f;await oe(b*1e3)}return null};async function l(y){try{s.value.isUpload=!0,x("uploadFile",y.target.files[0]);const u=await j("/uploads/audio",{extension:"mp3"});x("init ",u),s.value.id=u.id;const f=new FormData;for(let c in u.fields)f.append(c,u.fields[c]);if(f.append("file",y.target.files[0]),!(await fetch(u.url,{method:"POST",body:f})).ok)throw new Error("Network response was not ok");x("uploaded ");const C=await j("/uploads/audio/"+u.id+"/upload-finish",{upload_type:"file_upload",upload_filename:y.target.files[0].name});x("finish ",C);const T=await v(u.id);x("uploadFetch ",T);const D=await j("/uploads/audio/"+u.id+"/initialize-clip",{});x("clip ",D),V([D.clip_id])}catch{}s.value.isUpload=!1,o.value.value=""}return(y,u)=>(d(),m(z,null,[p(i(I),{type:"info",size:"small",round:"",bordered:!1},{default:_(()=>[s.value.isUpload?(d(),m("span",ue,"Upload...")):(d(),m("span",{key:1,class:"cursor-pointer",onClick:u[0]||(u[0]=f=>o.value.click())},r(y.$t("suno.upMps")),1))]),_:1}),t("input",{type:"file",onChange:l,ref_key:"fsRef",ref:o,style:{display:"none"},accept:".mp3"},null,544)],64))}}),de={class:"p-2"},pe={class:"pt-1"},ce={class:"pt-4 flex justify-between",style:{"margin-bottom":"10px"}},ve={class:"pt-1"},me={class:"pt-1"},fe={class:"pt-1"},_e={class:"pt-4"},ye={class:"pt-4 flex justify-between",style:{"margin-bottom":"15px"}},xe={class:"pt-1"},he={class:"pt-1"},ge={class:"pt-5"},be={class:"flex justify-between pb-3"},ke={class:"text-[12px]"},$e={class:"bg-[--n-fill-color] text-[9px] border-[0px] px-1 list-none rounded-md"},we={class:"pt-1"},De={class:"flex relative justify-between items-start p-2 hover:dark:bg-black hover:bg-gray-200 border-b-[1px] border-gray-500/10"},je={class:"w-[60px] h-[60px] relative cursor-pointer"},Ce={class:"w-full h-full justify-center items-center flex"},Ue={class:"flex-1 pl-2"},Ne={class:"flex justify-between line-clamp-1 w-full cursor-pointer"},ze={key:0,class:"opacity-60 line-clamp-1 w-full text-[12px] cursor-pointer"},Fe={key:1,class:"opacity-60 line-clamp-1 w-full text-[12px] cursor-pointer"},Se={class:"text-right text-[14px] flex justify-end items-center space-x-2"},Le={key:0,class:"text-[8px] flex items-center border-[1px] border-red-500/80 px-1 list-none rounded-md"},Te={key:1,class:"text-[8px] flex items-center border-[1px] border-gray-500/30 px-1 list-none rounded-md"},Me={key:2,class:"text-[8px] flex items-center border-[1px] border-gray-500/30 px-1 list-none rounded-md"},Oe={class:"pt-4"},Re={class:"flex justify-between items-start"},Ee={class:"flex items-start",style:{"margin-top":"15px"}},Pe=["innerHTML"],Be=S({__name:"mcInput",setup(L){const o=$({type:"custom",isLoading:!1}),s=$(),v=$({gpt_description_prompt:"",make_instrumental:!1,mv:"chirp-v3-5",prompt:""}),l=$({prompt:"",mv:"chirp-v3-5",title:"",tags:"",continue_at:120,continue_clip_id:""}),y=W(),u=[{label:"verion: v3.5",value:"chirp-v3-5"},{label:"verion: v3",value:"chirp-v3-0"}],f=A(()=>o.value.isLoading?!1:o.value.type=="custom"?l.value.tags&&l.value.title:o.value.type=="description"?(x("des: ",v.value.gpt_description_prompt,v.value.make_instrumental),l.value.title&&(v.value.gpt_description_prompt||v.value.make_instrumental)):!0),b=G();Y(()=>{g.setMyData({ms:b})});const C=()=>{let e=l.value.prompt||l.value.title;if(!e){b.error(P("suno.inputly"));return}if(o.value.isLoading){b.info(P("suno.doingly"));return}o.value.isLoading=!0,b.info(P("suno.doingly2")),j("/generate/lyrics/",{prompt:e}).then(async a=>{x("lyrics",a);let n=await ne(a.data);x("lyrics rz =>",n),n!=null&&(l.value.prompt=n.data.data.text,l.value.title=n.data.data.title),o.value.isLoading=!1}).catch(()=>o.value.isLoading=!1),l.value.tags||(l.value.tags=X())},T=async()=>{var a,n;o.value.isLoading=!1;let e=["0d435185-d440-42c8-982a-50205e1cf17d","43e095ba-5f08-4920-bb3d-89dd0defe0b7"];if(e=["d359a0aa-adf1-4298-9074-005573d7cc84","12e3d62f-8fcc-497b-8365-194657582519"],o.value.type=="custom"){v.value.make_instrumental&&(l.value.prompt=""),l.value.continue_clip_id!=""&&((n=(a=s.value)==null?void 0:a.metadata)==null?void 0:n.type)=="upload"&&(l.value.mv="chirp-v3-5-upload");let U=await j("/generate",l.value);o.value.isLoading=!1,e=U.clips.map(N=>N.id),x("ids ",e),(l.value.mv="chirp-v3-5-upload")&&(l.value.mv="chirp-v3-5")}else{v.value.prompt=l.value.title;let U=await j("/generate/description-mode",v.value);o.value.isLoading=!1,e=U.clips.map(N=>N.id)}V(e)};E(()=>g.myData.act,e=>{if(e=="suno.extend"){x("suno.extend",g.myData.actData);const a=g.myData.actData;s.value=a,l.value.continue_clip_id=a.id,l.value.continue_at=Math.ceil(a.metadata.duration/2)}});const D=Z(),c=A(()=>D.theme==="auto"?y.value==="dark":D.theme==="dark"),k=({focused:e,checked:a})=>{const n={};return a&&(n.background="#0084FF"),n};return(e,a)=>(d(),m("div",de,[p(i(te),{type:"line",animated:"",value:o.value.type,"onUpdate:value":a[12]||(a[12]=n=>o.value.type=n)},{default:_(()=>[p(i(H),{name:"description",tab:e.$t("suno.description")},{default:_(()=>[t("div",pe,[p(i(O),{placeholder:e.$t("suno.titlepls"),value:l.value.title,"onUpdate:value":a[0]||(a[0]=n=>l.value.title=n)},{prefix:_(()=>[t("span",null,r(e.$t("suno.title"))+"：",1)]),_:1},8,["placeholder","value"])]),t("div",ce,[t("div",null,r(e.$t("suno.desc"))+":",1),t("div",null,[p(i(q),{value:v.value.make_instrumental,"onUpdate:value":a[1]||(a[1]=n=>v.value.make_instrumental=n),size:"small","rail-style":c.value?k:""},{checked:_(()=>[R(r(e.$t("suno.noneedly")),1)]),unchecked:_(()=>[R(r(e.$t("suno.noneedly")),1)]),_:1},8,["value","rail-style"])])]),t("div",ve,[p(i(O),{value:v.value.gpt_description_prompt,"onUpdate:value":a[2]||(a[2]=n=>v.value.gpt_description_prompt=n),disabled:v.value.make_instrumental,placeholder:e.$t("suno.descpls"),type:"textarea",size:"small",autosize:{minRows:3,maxRows:12}},null,8,["value","disabled","placeholder"])]),t("div",me,[p(i(Q),{value:v.value.mv,"onUpdate:value":a[3]||(a[3]=n=>v.value.mv=n),options:u,size:"small"},null,8,["value"])])]),_:1},8,["tab"]),p(i(H),{name:"custom",tab:e.$t("suno.custom")},{default:_(()=>[t("div",fe,[p(i(O),{placeholder:e.$t("suno.titlepls"),value:l.value.title,"onUpdate:value":a[4]||(a[4]=n=>l.value.title=n)},{prefix:_(()=>[t("span",null,r(e.$t("suno.title"))+"：",1)]),_:1},8,["placeholder","value"])]),t("div",_e,[p(i(O),{placeholder:e.$t("suno.stylepls"),value:l.value.tags,"onUpdate:value":a[6]||(a[6]=n=>l.value.tags=n)},{prefix:_(()=>[t("span",null,r(e.$t("suno.style"))+"：",1)]),suffix:_(()=>[p(i(ee),{placement:"right",trigger:"hover"},{trigger:_(()=>[t("div",{class:"cursor-pointer",onClick:a[5]||(a[5]=n=>l.value.tags=i(X)())},[p(i(w),{icon:"fa:random",class:"w-4 h-4"})])]),default:_(()=>[t("div",null,r(e.$t("suno.rank")),1)]),_:1})]),_:1},8,["placeholder","value"])]),t("div",ye,[t("div",null,r(e.$t("suno.ly"))+" :",1),t("div",null,[p(i(q),{value:v.value.make_instrumental,"onUpdate:value":a[7]||(a[7]=n=>v.value.make_instrumental=n),size:"small","rail-style":c.value?k:""},{checked:_(()=>[R(r(e.$t("suno.noneedly")),1)]),unchecked:_(()=>[R(r(e.$t("suno.noneedly")),1)]),_:1},8,["value","rail-style"])])]),t("div",xe,[p(i(O),{value:l.value.prompt,"onUpdate:value":a[8]||(a[8]=n=>l.value.prompt=n),disabled:v.value.make_instrumental,placeholder:e.$t("suno.lypls"),type:"textarea",size:"small",autosize:{minRows:3,maxRows:12}},null,8,["value","disabled","placeholder"])]),t("div",he,[p(i(Q),{value:l.value.mv,"onUpdate:value":a[9]||(a[9]=n=>l.value.mv=n),options:u,size:"small"},null,8,["value"])]),l.value.continue_clip_id&&s.value?(d(),m(z,{key:0},[t("div",ge,[t("div",be,[t("div",ke,r(e.$t("suno.extendAt"))+" "+r(l.value.continue_at)+"s",1),p(i(I),{type:"success",size:"small",round:""},{default:_(()=>[t("span",{class:"cursor-pointer",onClick:a[10]||(a[10]=n=>l.value.continue_clip_id="")},"清除")]),_:1})]),p(i(K),{value:l.value.continue_at,"onUpdate:value":a[11]||(a[11]=n=>l.value.continue_at=n),step:1,max:Math.ceil(s.value.metadata.duration)},{thumb:_(()=>[t("div",$e,r(l.value.continue_at)+"s",1)]),_:1},8,["value","max"])]),t("div",we,[t("div",De,[t("div",je,[p(i(B),{lazy:"",width:"100",src:s.value.image_url,"preview-disabled":""},{placeholder:_(()=>[t("div",Ce,[p(i(w),{icon:"line-md:downloading-loop",class:"text-[40px] text-blue-400"})])]),_:1},8,["src"])]),t("div",Ue,[t("div",Ne,[t("h3",null,r(s.value.title),1)]),s.value.metadata&&s.value.metadata.prompt?(d(),m("div",ze,r(s.value.metadata.prompt),1)):(d(),m("div",Fe,r(e.$t("suno.noly")),1)),t("div",Se,[s.value.status=="error"?(d(),m("div",Le,"失败")):h("",!0),s.value.metadata&&s.value.metadata.duration?(d(),m("div",Te,r(s.value.metadata.duration.toFixed(1))+"s",1)):h("",!0),s.value.major_model_version?(d(),m("div",Me,r(s.value.major_model_version),1)):h("",!0)])])])])],64)):h("",!0)]),_:1},8,["tab"])]),_:1},8,["value"]),t("div",Oe,[t("div",Re,[p(i(ae),{type:"success",class:"genner-button",bordered:!1,style:{"border-radius":"8px"},disabled:!f.value,onClick:a[13]||(a[13]=n=>T())},{default:_(()=>[p(i(w),{icon:"ri:music-fill"}),R(" "+r(e.$t("suno.generate")),1)]),_:1},8,["disabled"])]),t("div",Ee,[o.value.type=="custom"?(d(),F(i(I),{key:0,type:"info",round:"",bordered:!1,style:{"margin-right":"15px"},size:"small"},{default:_(()=>[t("span",{class:"cursor-pointer",onClick:a[14]||(a[14]=n=>C())},r(e.$t("suno.generately")),1)]),_:1})):h("",!0),o.value.type=="custom"?(d(),F(re,{key:1})):h("",!0)])]),o.value.type=="custom"?(d(),m("div",{key:0,style:{color:"#d84c10"},class:"pt-4 text-[12px]",innerHTML:i(P)("suno.info")},null,8,Pe)):h("",!0)]))}}),Ie={class:"sss",style:{"--n-rail-height":"2px"}},Ve=S({__name:"playui",emits:["update"],setup(L,{emit:o}){const s=$({v:10,max:0,status:"",idDrop:!1}),v=y=>{g.setMyData({act:"playUpdate",actData:{v:y}})},l=o;return E(()=>g.myData.act2,y=>{if(y=="playStatus"){if(s.value.idDrop)return;let u=g.myData.actData;x("playStatus",u),u&&u.d&&u.d.duration&&(s.value.max=u.d.duration,s.value.v=u.d.currentTime),u&&(s.value.status=u.a),l("update",s.value)}}),E(()=>g.myData.act,y=>{if(y=="playStatus"){let u=g.myData.actData;u&&(s.value.status=u.a),l("update",s.value)}}),(y,u)=>(d(),m("div",Ie,[s.value.max?(d(),F(i(K),{key:0,"on-dragend":()=>s.value.idDrop=!1,"on-dragstart":()=>s.value.idDrop=!0,class:"w-full",value:s.value.v,"onUpdate:value":u[0]||(u[0]=f=>s.value.v=f),step:1,max:s.value.max,"on-update:value":v,"format-tooltip":f=>f.toFixed(1)+"s"},null,8,["on-dragend","on-dragstart","value","max","format-tooltip"])):h("",!0)]))}});const Ae={key:0},He=["onClick"],Qe={class:"w-full h-full justify-center items-center flex"},Xe={key:0,class:"absolute top-0 right-0 w-full h-full flex justify-center items-center"},qe={class:"absolute top-0 right-0 w-full h-full justify-center items-center flex"},Ge={class:"flex-1 pl-2"},Je=["onClick"],Ke={class:"flex justify-start items-center"},We={key:0,class:"text-[8px] flex items-center border-[1px] border-gray-500/30 px-1 ml-1 list-none rounded-md"},Ye={class:"opacity-80"},Ze=["onClick"],et=["onClick"],tt={class:"text-right text-[14px] flex justify-end items-center space-x-2"},at={key:0,class:"text-[8px] flex items-center border-[1px] border-gray-500/30 px-1 list-none rounded-md"},st={key:1,class:"text-[8px] flex items-center border-[1px] border-red-500/80 px-1 list-none rounded-md"},lt={class:"text-[8px] flex items-center border-[1px] border-gray-500/30 px-1 list-none rounded-md"},ot=["onClick"],nt={key:3,class:"text-[8px] flex items-center border-[1px] border-gray-500/30 px-1 list-none rounded-md"},it=["href"],ut={key:1,class:"w-full h-full flex justify-center items-center"},rt=S({__name:"mcList",setup(L){const o=$([]),s=new ie,v=$({playid:""}),l=G(),y=()=>{let c=s.getObjs();o.value=c.reverse()},u=c=>c.id==v.value.playid?["bg-gray-200","dark:bg-black"]:[],f=c=>{if(c.status=="error"){l.info("这首歌生成失败！");return}v.value.playid=c.id,g.setMyData({act:"goPlay",actData:c}),c.status!="complete"&&V([c.id])},b=c=>{x("extend",b),g.setMyData({act:"suno.extend",actData:c})},C=$({v:10,max:0,status:"",idDrop:!1});E(()=>g.myData.act,c=>{if(c=="FeedTask"&&y(),c=="playEned"){let k=o.value.findIndex(e=>e.id==v.value.playid);k++,x("playEned,",k,o.value.length),k<o.value.length&&setTimeout(()=>f(o.value[k]),1e3)}});const T=c=>{c=c.replace("m_","");let k=o.value.findIndex(e=>e.id==c);return k<0?null:o.value[k]},D=c=>{C.value=c};return y(),(c,k)=>o.value.length>0?(d(),m("div",Ae,[(d(!0),m(z,null,se(o.value,e=>{var a,n,U,N;return d(),m("div",{class:le([u(e),"flex relative justify-between items-start p-2 hover:dark:bg-black hover:bg-gray-200 border-b-[1px] border-gray-500/10"])},[v.value.playid==e.id?(d(),F(Ve,{key:0,onUpdate:D,class:"absolute top-[-4px] left-0 w-full z-10"})):h("",!0),t("div",{class:"w-[60px] h-[60px] relative cursor-pointer",onClick:M=>f(e)},[e.status=="complete"?(d(),m(z,{key:0},[p(i(B),{lazy:"",width:"100",src:e.image_url,"preview-disabled":""},{placeholder:_(()=>[t("div",Qe,[p(i(w),{icon:"line-md:downloading-loop",class:"text-[40px] text-blue-400"})])]),_:2},1032,["src"]),v.value.playid==e.id?(d(),m("div",Xe,[C.value.status=="pause"?(d(),F(i(w),{key:0,icon:"mdi:pause-circle-outline",class:"text-[40px] text-[#fff]"})):(d(),F(i(w),{key:1,icon:"mdi:play-circle-outline",class:"text-[40px] text-[#fff]"}))])):h("",!0)],64)):(d(),m(z,{key:1},[p(i(B),{lazy:"",width:"100",src:e.image_url,"preview-disabled":""},null,8,["src"]),t("div",qe,[p(i(w),{icon:"line-md:downloading-loop",class:"text-[40px] text-green-300"})])],64))],8,He),t("div",Ge,[t("div",{class:"flex justify-between line-clamp-1 w-full cursor-pointer",onClick:M=>f(e)},[t("div",Ke,[t("h3",null,r(e.title),1),((a=e.metadata)==null?void 0:a.type)=="upload"?(d(),m("div",We,"Uploaded")):h("",!0)]),t("div",Ye,r(e.metadata.tags),1)],8,Je),e.metadata&&e.metadata.prompt?(d(),m("div",{key:0,class:"opacity-60 line-clamp-1 w-full text-[12px] cursor-pointer",onClick:M=>f(e)},r(e.metadata.prompt),9,Ze)):(d(),m("div",{key:1,class:"opacity-60 line-clamp-1 w-full text-[12px] cursor-pointer",onClick:M=>f(e)},r(c.$t("suno.noly")),9,et)),t("div",tt,[(n=e.metadata)!=null&&n.audio_prompt_id?(d(),m("div",at,r(c.$t("suno.extendFrom"))+":"+r((N=T((U=e.metadata)==null?void 0:U.audio_prompt_id))==null?void 0:N.title),1)):h("",!0),e.status=="error"?(d(),m("div",st,r(c.$t("suno.fail")),1)):h("",!0),e.metadata&&e.metadata.duration?(d(),m(z,{key:2},[t("div",lt,r(e.metadata.duration.toFixed(1))+"s",1),t("div",{onClick:M=>b(e),class:"text-[8px] flex items-center border-[1px] border-gray-500/30 px-1 list-none rounded-md cursor-pointer"},r(c.$t("suno.extend")),9,ot)],64)):h("",!0),e.major_model_version?(d(),m("div",nt,r(e.major_model_version),1)):h("",!0),p(i(w),{icon:"mdi:play-circle-outline",class:"cursor-pointer",onClick:M=>f(e)},null,8,["onClick"]),t("a",{href:e.audio_url,download:"",target:"_blank"},[p(i(w),{icon:"mdi:download",class:"cursor-pointer"})],8,it)])])],2)}),256))])):(d(),m("div",ut,[p(i(J),{description:c.$t("suno.nodata")},null,8,["description"])]))}}),dt={key:0},pt={class:"w-full relative h-[300px]"},ct={class:"w-full h-full justify-center items-center flex"},vt={class:"absolute bottom-0 right-0 p-2 text-white text-right"},mt={class:"text-xl"},ft={class:""},_t={class:"text-wrap p-2"},yt={key:1,class:"flex w-full h-full justify-center items-center"},xt=S({__name:"mcplayer",setup(L){const o=$();return E(()=>g.myData.act,s=>{if(s=="goPlay"){let v=g.myData.actData;o.value=v}}),(s,v)=>o.value?(d(),m("div",dt,[t("div",pt,[p(i(B),{src:o.value.image_large_url,class:"w-full h-full"},{placeholder:_(()=>[t("div",ct,[p(i(w),{icon:"line-md:downloading-loop",class:"text-[60px] text-blue-400"})])]),_:1},8,["src"]),t("div",vt,[t("h2",mt,r(o.value.title),1),t("div",ft,r(s.$t("suno.style"))+"："+r(o.value.metadata.tags),1)])]),t("pre",_t,r(o.value.metadata.prompt),1)])):(d(),m("div",yt,[p(i(J),{description:s.$t("suno.emputy")},null,8,["description"])]))}}),ht={class:"flex w-full h-full music-content"},gt={class:"w-[300px] h-full overflow-y-auto"},bt={class:"flex-1 h-full bg-[#fafbfc] pt-2 dark:bg-[#18181c] overflow-y-auto music-list"},kt={class:"w-[300px] h-full overflow-y-auto"},Ct=S({__name:"music",setup(L){return(o,s)=>(d(),m("div",ht,[t("div",gt,[p(Be)]),t("div",bt,[p(rt)]),t("div",kt,[p(xt)])]))}});export{Ct as default};
